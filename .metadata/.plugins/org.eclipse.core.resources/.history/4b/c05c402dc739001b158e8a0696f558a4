package org.zerock.controller;


import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

import org.zerock.domain.TestVO;
import org.zerock.mapper.TestMapper;

import lombok.AllArgsConstructor;
import lombok.extern.log4j.Log4j;

@RestController
@Log4j
@RequestMapping("/login/*")
@AllArgsConstructor
public class TestController{
	private TestMapper mapper;
	
@GetMapping(value="/list" ,produces = "application/text; charset=UTF-8")
	public @ResponseBody String list(Model model) {
	log.info("list");
	model.addAttribute("list",mapper.getList());
	log.info(model);
	return model.toString();
}

@PostMapping("/read")
public @ResponseBody TestVO read(@RequestParam("usernum") Long usernum,RedirectAttributes rttr){
	log.info("read");
	TestVO test=mapper.read(usernum);
return test;
	
	
}
@GetMapping(value="/getSample")

public @ResponseBody TestVO getSample() {
	TestVO testvo= new TestVO();
	testvo.setUserid("테스트7");
	testvo.setPasswd("1234");
	testvo.setUsernum((long) 7);
	mapper.insert(testvo);
	return testvo;
}




}
